// AUTOGENERATED FILE - DO NOT EDIT!
// django-angular - v0.7.0 - 2014-04-12
// https://github.com/jrief/django-angular
// Copyright (c) 2014 Jacob Rief; Licensed MIT
!function(a,b){"use strict";var c=a.module("ng.django.forms",[]);c.directive("form",function(){return{restrict:"E",scope:"isolate",priority:-1,link:function(c,d,e){var f=c[e.name],g=a.element(d).find("input");a.forEach(g,function(a){f[a.name]!==b&&f[a.name].$setViewValue(a.defaultValue)}),f.$setPristine()}}}),c.directive("validateDate",function(){function a(a){var c,d;return a?(d=new Date(a),isNaN(d)?!1:b?(c=b.exec(a),c&&parseInt(c[2])===d.getMonth()+1):!0):!0}var b=null;return{require:"ngModel",restrict:"A",link:function(c,d,e,f){e.validateDate&&(b=new RegExp(e.validateDate,"g")),c.$watch(e.ngModel,function(b){f.$pristine||f.$setValidity("date",a(b))})}}}),c.factory("djangoForm",function(){function c(a){for(var b in a)if(a.hasOwnProperty(b))return!0;return!1}var d="__all__";return{setErrors:function(e,f){return e.$message="",e.$error.hasOwnProperty("rejected")&&a.forEach(e.$error.rejected,function(a){var c,d=a.$name;e.hasOwnProperty(d)&&(c=e[d],c.$message="",c.$setValidity("rejected",!0),c.rejectedListenerPos!==b&&(c.$viewChangeListeners.splice(c.rejectedListenerPos,1),delete c.rejectedListenerPos))}),a.forEach(f,function(a,b){var c;a.length>0&&(b===d?(e.$message=a[0],e.$setPristine()):e.hasOwnProperty(b)&&(c=e[b],c.$message=a[0],c.$setValidity("rejected",!1),c.$setPristine(),c.rejectedListenerPos=c.$viewChangeListeners.push(function(){c.$setValidity("rejected",!0),c.$viewChangeListeners.splice(c.rejectedListenerPos,1),delete c.rejectedListenerPos})-1))}),c(f)}}}),c.provider("djangoRMI",function(){function c(d){a.forEach(d,function(f,g){if(!a.isObject(f))throw new Error("djangoRMI.configure got invalid data");f.hasOwnProperty("url")?(f.headers["X-Requested-With"]="XMLHttpRequest",d[g]=function(c){var d=a.copy(f);if("auto"===d.method)c===b?d.method="GET":(d.method="POST",d.data=c);else if("POST"===d.method){if(c===b)throw new Error("Calling remote method "+g+" without data object");d.data=c}return e(d)}):c(f)})}var d,e;this.configure=function(a){d=a,c(d)},this.$get=["$http",function(a){return e=a,d}]})}(window.angular),function(a,b){"use strict";function c(){}a.module("ng.django.websocket",[]).provider("djangoWebsocket",function(){var d,e={log:c,warn:c,error:c},f=0;this.prefix=function(a){return d=a,this},this.setHeartbeat=function(a){return f=a>=1e3?a:0,this},this.setLogLevel=function(a){switch(a){case"debug":e=console;break;case"log":e.log=console.log;case"warn":e.warn=console.warn;case"error":e.error=console.error}return this},this.$get=["$window","$q","$timeout","$interval",function(c,g,h,i){function j(a){try{e.log("Connecting to "+a),t=g.defer(),s=new WebSocket(a),s.onopen=k,s.onmessage=n,s.onerror=m,s.onclose=l,x=null}catch(b){t.reject(new Error(b))}}function k(){e.log("Connected"),y=500,t.resolve(),null===C&&f>0&&(D=0,C=i(o,f))}function l(){e.log("Connection closed"),!x&&y&&(x=h(function(){j(s.url)},y),y=Math.min(y+500,5e3))}function m(a){e.error("Websocket connection is broken!"),t.reject(new Error(a))}function n(b){if(b.data===B)return void(D=0);try{var c=JSON.parse(b.data);z&&u.$apply(function(){a.extend(u[w],c)})}catch(d){e.warn("Data received by server is invalid JSON: "+b.data)}}function o(){try{if(D++,D>3)throw new Error("Too many missed heartbeats.");s.send(B)}catch(a){i.cancel(C),C=null,e.warn("Closing connection. Reason: "+a.message),s.close()}}function p(a){a!==b&&s.send(JSON.stringify(a))}function q(b){v=b,a.forEach(v,function(a){"subscribe"===a.substring(0,9)?z=!0:"publish"===a.substring(0,7)&&(A=!0)})}function r(){u.$watchCollection(w,p)}var s,t,u,v,w,x=null,y=null,z=!1,A=!1,B="--heartbeat--",C=null,D=0;return{connect:function(a,b,e){var f=[],g=c.location;return u=a,q(b),w=e,f.push("https"===g.protocol?"wss:":"ws:"),f.push("//"),f.push(g.host),f.push(d),f.push(g.pathname),f.push("?"),f.push(v.join("&")),j(f.join("")),u[w]=u[w]||{},A&&t.promise.then(r),t.promise}}}]})}(window.angular);